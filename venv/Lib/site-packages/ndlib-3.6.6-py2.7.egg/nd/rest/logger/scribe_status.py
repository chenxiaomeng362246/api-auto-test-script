# coding=utf-8
import socket
# from fb303_scripts import fb303_simple_mgmt
# from thrift.transport import TSocket, TTransport

__author__ = 'linzh'


def check_server_status(ip, port):
    status = False

    try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(0.01)
        # sock.setblocking(1)
        sock.connect((ip, port))
        sock.close()
        status = True
    except Exception, e:
        print(e)

    return status


# sock = TSocket.TSocket("fs.qa.huayu.nd", 8011)
# trans = TTransport.TBufferedTransport(sock)
# trans.open()
# fb303_simple_mgmt.service_ctrl("fs.qa.huayu.nd", 1463)

if __name__ == "__main__":
    print check_server_status("fs.qa.huayu.nd", 1463)
