# coding=utf-8
from cof.nd_uc import UcEnv
from cof.uc.config.iconfig import IConfig
from cof.uc.config.token_t import TokenType
from cof.uc.config.uc_config import UcConfig
from cof.uc.token_factory import TokenFactory

__author__ = 'linzh'


class UcToken2(object):
    def __init__(self, config):
        if not isinstance(config, IConfig):
            raise Exception("配置要为UC的配置类")

        token_factory = TokenFactory(token_config)
        self.token_maker = token_factory.create()

    def get_token(self, url="", method="", host=""):
        return self.token_maker.get_token(url=url, method=method, host=host)


if __name__ == "__main__":
    token_config = UcConfig()
    token_config.set_env(UcEnv.pre)
    token_config.set_token_type(TokenType.MAC110)

    tok_o = UcToken2(token_config)

    mac_id = tok_o.get_token(method="GET", url="/v1/channels/search", host="auxo-channel-api.dev.web.nd")

    print mac_id