# coding=utf-8
import sys

from nd.rest import get_version_string
from setuptools import find_packages, setup

extra_opts = {
    "packages": ["nd"]
}


version = "3.6.6"


if sys.argv[1] == "sdist":
    from nd.check_version import get_last_version
    cur_version = get_last_version()

    if cur_version == version:
        raise Exception("版本未升级，部署失败")
        exit(1)

# noinspection PyPackageRequirements,PyPackageRequirements
setup(
    name="ndlib",
    version=version,
    description="test framework for python",
    author="linzh",
    author_email="cleardo@gmail.com",
    platforms=["any"],  # or more specific, e.g. "win32", "cygwin", "osx"
    license="BSD",
    url="http://github.com/cleardo/cof",
    install_requires=[
        'backports.ssl_match_hostname<=3.5.3'
        , 'poster<=0.8.1'
        ,"requests"
        ,'pyhamcrest ==1.9.0'        
        , 'tornado<=4.0', 
        'pymongo<=2.8.1', 'six<=1.10.0', 
        'enum34<=1.2.6',
        'pydes<=2.0.1' 
        , 'flask<=0.10.1'
        , 'flask-mongoalchemy<=0.7.2',
        'werkzeug<=0.15.4',
        'jinja2<=2.8',
        'markupsafe<=0.23',
        'itsdangerous<=0.24',
        'pytz<=2019.3'
    ],
    packages=find_packages(),
    package_data={
        'nd.jlibs': ['*.jar']
    },
    # **extra_opts
    # data_files=[('nd/jlibs', ['*.jar'])],
    # include_package_data=True,
)
