# coding=utf-8
from flask import Flask
from flask.ext.mongoalchemy import MongoAlchemy
from nd.rest.rand import CoRand

__author__ = 'linzh'

app = Flask(__name__)

app.config['MONGOALCHEMY_DATABASE'] = "qa_mdb_test111"
app.config['MONGOALCHEMY_CONNECTION_STRING'] = 'mongodb://qa_mdb_test111:A3aG1i2u85Z4@m1.all.debug.mongod.sdp:34001,m3.all.debug.mongod.sdp:34001,m2.all.debug.mongod.sdp:34001/qa_mdb_test111'


class MgStatus(object):
    MG_ALIVE = True

try:
    db = MongoAlchemy(app)

    class UcTokenMg(db.Document):
        username = db.StringField()
        password = db.StringField()
        org = db.StringField()
        access_token = db.StringField()
        mac_key = db.StringField()
        session_key = db.StringField()
        refresh_token = db.StringField()
        expires_at = db.StringField()
except:
    MgStatus.MG_ALIVE = False
    class UcTokenMg(object):
        pass


if __name__ == "__main__":
    token_o = UcTokenMg(username="linzh_" + CoRand.randomword(8), password="", access_token="", mac_key="", session_key="")
    token_o.save()

